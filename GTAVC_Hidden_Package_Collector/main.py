from ReadWriteMemory import ReadWriteMemory
import struct
import time
import keyboard
num = 0
pkg = 1


x = [1139789005, 1144068506, -1017839616, -1011338445, -1026516582, -1016417485, 1118830592, 1129145958, 1127684506, 1136227123, 1133864550, 1134618214, 1140188774, 1139566182, 1136512205, 1133579469, 1139503923, 1137429709, 1141663334, 1147073331, 1135663514, 1134129971, 1132963430, 1134844314, 1139582566, 1135624192, 1116484403, 1112958566, 1132799590, 1137636147, -1020500378, -1016522342, 1116431974, 1121386496, 1131013734, 1137983488, 1137233101, 1128392294, 1142118810, 1140980122, -1037618381, -1048523571, 1114819789, -1031156531, 1118135910, 1116536832, 1126327910, 1110206054, -1036360090, 1110284698, -1016273306, -1006518272, -1005510656, -1013238989, -1015716250, -1015617946, -1008631808, -1002499277, -993934541, -1002065101, -1008615424, -1005725286, -1000297267, -998978355, -1000991949, -997847040, -997117133, -999045530, -998167347, -998735872, -997581619, -997362893, -996841882, -997673370, -996967219, -998339379, -1001008333, -996972954, -1001866854, -1004850381, -998239437, -997702042, -1001435955, -997125325, -995415654, -996139827, -992101990, -996906598, -994530918, -993838694, -995581133, -993793638, -995439411, -994152448, -991648973, -992489472, -992401818, -995753984, -997920768, -996263526]
y = [-992555008, -1007085158, -993139917, -992434586, -993523302, -997764301, -998773555, -1000457830, -1004324454, -1008025600, -1014284288, -1002335437, -1036700877, 1122500608, 1129637478, 1133753139, 1150055219, 1149144269, 1150329651, 1146778419, -1005776077, 1150496768, 1147746714, 1144212685, 1099117363, 1133320602, -1007694643, -1008779264, -1015421338, 1150823629, -995645030, -999764787, -1001970074, -1005979238, -1023134925, 1119000986, 1138199757, 1143583539, 1108344832, -1022925210, 1147574682, 1148710093, 1147478016, 1150058496, 1149974938, 1142281011, 1131832934, -1021909402, 1132517786, -1049624576, -1005386138, -1005202637, -1009562419, -1009795072, -1012799898, 1150840832, 1151390515, 1151221760, 1152344883, 1150020813, 1150023270, 1145177702, 1138176819, 1132812698, 1130659840, 1135597978, 1138199757, 1128261222, 1110441984, -1015395123, -1024340787, -1011764429, -1012999782, -1005189530, -1005579469, -1000700314, -1004670157, -1003244749, -996928717, -995636019, -994389197, -996809114, -994664448, -995706470, -996346266, -997240832, -998005146, -998101811, -1000587264, -997953536, -997700403, -997986304, -999817216, -1001601434, -1000479130, -1009673830, -1013605990, -1006221722, -999202816, -995599155]
z = [1098488218, 1095027917, 1095866778, 1094293914, 1093035622, 1096391066, 1100532941, 1094818202, 1093455053, 1096600781, 1094608486, 1102472806, 1092616192, 1093874483, 1093979341, 1096286208, 1103364096, 1103783526, 1100428083, 1099117363, 1113692570, 1099641651, 1092406477, 1102472806, 1107558400, 1100795085, 1096391066, 1089680179, 1108371046, 1100165939, 1081711002, 1092406477, 1094398771, 1097544499, 1090519040, 1093979341, 1094084198, 1095657062, 1099274650, 1108135117, 1100690227, 1093559910, 1093455053, 1099431936, 1100323226, 1097334784, 1094923059, 1094923059, 1103364096, 1099589222, 1092930765, 1092930765, 1100899942, 1092721050, 1092825907, 1093559910, 1095342490, 1094189056, 1091253043, 1092406477, 1115081933, 1102472806, 1093559910, 1091462758, 1095657062, 1093874483, 1093664768, 1095342490, 1093769626, 1093350195, 1101057229, 1097859072, 1093559910, 1104150528, 1094713344, 1099903795, 1093979341, 1102472806, 1093769626, 1099064934, 1100690227, 1093874483, 1095342490, 1097754214, 1100061082, 1102158234, 1097649357, 1097649357, 1107401114, 1097649357, 1103364096, 1101686374, 1101424230, 1097649357, 1097649357, 1097649357, 1097649357, 1096705638, 1097649357, 1106037965]

rwm = ReadWriteMemory()
try:

	process = rwm.get_process_by_name('gta-vc.exe')
	process.open()
except:
	print('Game is not Running......')
	exit()

z_baseaddress = 0x400000+0x3E4E94
x_baseaddress = 0x400000+0x3E4B8C
y_baseaddress = 0x400000+0x3E4E94

z_pos_pointer = process.get_pointer(z_baseaddress, offsets=[0x3C])
x_pos_pointer = process.get_pointer(x_baseaddress, offsets=[0x34])
y_pos_pointer = process.get_pointer(y_baseaddress, offsets=[0x38])
print("*******************************************")
print("Package Collector is Starting...")
time.sleep(0.3)
print("Make sure the game is Running")
time.sleep(0.3)
print("Press 'p' to move to nxt Package...")
print("Press 'i' to move to prev Package.....")
print("Press 'e' to exit the program.....")
print("*******************************************")
time.sleep(2)
print("Package Collector is Running...")
while 1:
	
	
	key = keyboard.read_key()
	time.sleep(0.5)
	if key == "p":

		try:

			process.write(z_pos_pointer, z[num])
			process.write(y_pos_pointer, y[num])
			process.write(x_pos_pointer, x[num])
		except:
			num = 0
		print('Package Collected ' )
		num += 1
		pkg += 1
		
		
	if key == "i":
		num = num-1
		try:

			process.write(z_pos_pointer, z[num-1])
			process.write(y_pos_pointer, y[num-1])
			process.write(x_pos_pointer, x[num-1])
		except:
			break
		
		
		
		
	if key == "e":

		break










#Code To Read Coordinates.....

"""
while 1:

	z_pos = process.read(z_pos_pointer)
	z = struct.unpack("@f", struct.pack("@I", z_pos))[0]
	x_pos = process.read(x_pos_pointer)
	x = struct.unpack("@f", struct.pack("@I", x_pos))[0]
	y_pos = process.read(y_pos_pointer)
	y = struct.unpack("@f", struct.pack("@I", y_pos))[0]

	print({'x': x, 'z': z, 'y': y})
	

"""